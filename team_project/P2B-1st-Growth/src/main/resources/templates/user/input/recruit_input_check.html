<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
  <meta charset="UTF-8">
  <title>募集内容の確認</title>

  <link rel="stylesheet" th:href="@{/css/common/common.css}">
  <link rel="stylesheet" th:href="@{/css/footer/footer.css}">
  <link rel="stylesheet" th:href="@{/css/recruit/recruit_input_check.css}">
</head>
<body>

<div class="page"
     th:with="
       r=${recruitment},
       club=${r != null ? r.clubMaster : null},
       clubId=${club != null ? club.clubId : null}
     ">

  <div class="card">

    <!-- ヘッダー -->
    <div class="cardHead">
      <div class="cardTitle">募集内容の確認</div>

      <!-- 要点チップ -->
      <div class="chips">
        <span class="chip chip-main"
              th:text="${club != null ? club.clubName : '部活未設定'}">部活未設定</span>

        <span class="chip"
              th:text="${r != null && r.capacityRange != null ? r.capacityRange.label : '人数未設定'}">人数未設定</span>

        <span class="chip"
              th:text="${r != null && r.locationText != null && !#strings.isEmpty(r.locationText) ? '場所あり' : '場所未定'}">場所未定</span>
      </div>
    </div>

    <!-- 本文 -->
    <dl class="kv">

      <div class="row">
        <dt>部活動</dt>
        <dd th:text="${club != null ? club.clubName : '未設定'}">未設定</dd>
      </div>

      <div class="row">
        <dt>タイトル</dt>
        <dd th:text="${r != null && r.title != null && !#strings.isEmpty(r.title) ? r.title : '未設定'}">未設定</dd>
      </div>

      <div class="row">
        <dt>日程</dt>
        <dd class="time">
          <span th:text="${r != null && r.startDateTime != null ? #temporals.format(r.startDateTime,'yyyy/MM/dd HH:mm') : '未設定'}">未設定</span>
          <span class="sep">〜</span>
          <span th:text="${r != null && r.endDateTime != null ? #temporals.format(r.endDateTime,'HH:mm') : '未設定'}">未設定</span>
        </dd>
      </div>

      <div class="row">
        <dt>人数</dt>
        <dd th:text="${r != null && r.capacityRange != null ? r.capacityRange.label : '未設定'}">未設定</dd>
      </div>

      <div class="row">
        <dt>場所</dt>
        <dd class="wrap"
            th:text="${r != null && r.locationText != null && !#strings.isEmpty(r.locationText) ? r.locationText : '未定'}">未定</dd>
      </div>

      <div class="row">
        <dt>備考</dt>
        <dd class="wrap"
            th:text="${r != null && r.notes != null && !#strings.isEmpty(r.notes) ? r.notes : 'なし'}">なし</dd>
      </div>

    </dl>

    <!-- ボタン -->
    <div class="actions">

      <!-- ✅ ここが重要：clubId を hidden で必ず送る -->
      <form th:action="@{/recruitment/regist}" method="post">
        <input type="hidden" name="clubId" th:value="${clubId}">
        <button type="submit" class="btnPrimary">この内容で登録</button>
      </form>

      <form th:action="@{/recruitment/input}" method="get">
        <button type="submit" class="btnSecondary">修正する</button>
      </form>
    </div>

  </div>
</div>

<div th:replace="common/footer :: footer"></div>

</body>
</html>
